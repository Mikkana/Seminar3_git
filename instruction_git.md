# **Инструкция по работе с Git**

![Git emblem](Image\gitcat.jpg)


*Git - распределённая система контроля версий. "Распределённая" в данном случае обозначает, что весь код, включая историю изменений, хранится у каждого разработчика на локальной (его) машине. В том случае, если что-то произойдёт с версией или репозиторием на одной машине, она сохранится на другой и её будет возможно восстановить. Также система удобна тем, что одновременно над одной задачей и одним модулем/файлом может работать несколько человек, каждый в своей ветке, в своей копии репозитория.*

## Создание нового локального репозитория

Перед началом работы с git именно эту команду необходимо прописать, находясь в соответствующей папке.

Для создания нового репозитория (инициализация) нужно ввести команду:

	git init

## Проверка состояния репозитория

Для того, чтобы проверить текущее состояние репозитория
необходимо использовать команду:

	git status

## Добавление изменений к отслеживанию

Для того, чтобы отслеживать изменения в файле, необходимо добавить файл в git к отслеживанию следующей командой:

	git add <имя файла>

Для скорости можно прописать только часть имени файла и нажать tab, консоль сама дополнит название.

## Сохранение изменений файла в репозитории

Для того, чтобы добавить изменения в репозиторий, нужно сохранить изменяемый файл и прописать команду:

	git commit -m "<комментарий>"

Комментарий обязателен, если команда будет прописана без него, откроется (в зависимости от редактора - в моём случае VIM) создание комментария к изменениям.

Для того, чтобы не добавлять отдельно файл к отслеживанию, можно прописать команду сохранения изменений следующей командой:

	git commit -am "<комментарий>"
	или
	git commit -a -m "<комментарий>"

В этом случае -a это тот же add

## Просмотр всех версий изменений файла в репозитории

Для того, чтобы увидеть все изменения, которые были сохранены командой commit, нужно воспользоваться командой:

	git log

Блоками будут показаны захешированный номер коммита, автор коммита, Дата изменения, комментарий. 

Для того, чобы выйти из функционала просмотра лога изменений, нужно нажать на клавиатуре клавишу q в английской раскладке.

Если нужен краткий список изменений, можно воспользоваться командой:
	
	git log --oneline

Список действий с файлом будет содержать краткий хэшированный номер коммита и комментарий, а также указывать, какая версия файла в данный момент активна.

Если добавить --all, будут видны как прошлые изменения, так и будущие:

	git log --all
	или
	git log --all --oneline

## Просмотр различий между коммитами

Для того, чтобы просмотреть изменения, произошедшие между нынешней версией файла (незакомиченной) и предыдущей, нужно сохранить файл и воспользоваться командой:

	git diff

Изменённые строки будут показаны как удалённые (красным) и новые (зелёным или белым).

Для того, чтобы увидеть разницу между двумя конкретными версиями файла, нужно воспользоваться командой с добавлением кратких хэшированных идентификаторов (номеров) 
версий, например:

	git diff cea9fa2 64ce199

Чтобы выйти из просмотра изменений, нужно переключиться на английскую раскладку и нажать q.

## Переход на разные версии файла и их просмотр

Для того, чтобы переключиться с одной версии изменений на другую, необходимо ввести команду:

	git checkout <идентификатор версии>

В качестве идентификатора подойдёт краткий хэшированный идентификатор (номер).

Для того, чтобы вернуться к последней версии файла, нужно ввести команду:

	git checkout master

На месте master может находиться наименование ветки, в актуальное состояние которой требуется вернуться.

# Ветвления

Ветвления в git нужны для того, чтобы отдельно работать над разными задачами или частями задач, документов, файлов, не затрагивая основную рабочую версию до того, как нововведение будет полностью закончено и не мешая другим работать над их частями. Ветвление может быть как небольшим (на 2 ветки: dev и master/main), так и очень обширным - например: master/main, ветки разработчиков, которые также делятся на ветки по задачам. Некоторые ветки не удаляются никогда (master/main и dev), некоторые удаляются сразу после мёрджа (слияния) с master/main (основной веткой).

## Просмотр имеющихся веток

Для просмотра всех имеющихся веток нужно ввести команду:

	git branch

До создания новой ветки команда выдаст в ответ только 1 ветку: master/main.

## Создание новой ветки

Чтобы создать новую ветку, нужно ввести команду:

	git branch <branchname>

Где branchname - имя новой ветки

Для того, чтобы влить изменения из одной ветки в другую, нужно использовать команду:

	git merge <имя ветки, из которой поступят изменения>

До этого необходимо сначала перейти в ветку, в которую будут переноситься (вливаться) изменения.

## Переход с веттки на ветку



## Слияние веток

Для того, чтобы изменения попали в основную ветку (master/main) или любую другую, нужно их слить, точнее влить изменения из одной ветки в другую, воспользовавшись командой:

	git merge <имя вливаемой ветки>

Нужно перейти в ветку, в которую нужно влить изменения и уже там выполнить команду.
Например, чтобы изменения из ветки dev появились в ветке master, нужно перейти в ветку master и там прописать:

	git merge dev


## Решение конфликтов при слиянии веток.

Если в сливаемых ветках в одинаковых местах были отличные друг от друга изменения, при попытке их слияния произойдёт конфликт.

Например:

	В ветку dev залили ветку master.
	В ветке dev дописали строку: "Таким образом мы получаем этот эффект"
	В это же время в ветке master в то же место дописали строку: "Именно так мы и пришли к итогу".

При попытке слияния получился конфликт.
В разных редакторах разные возможности решения конфликта. Основной, как мне показалось, когда после попытки слияния редактор оставляет оба варианта, предлагая тому, кто решает конфликт, выбрать, какое изменение сохранить, а какое оставить. В этом случае можно сохранить оба изменения, так как во время решения конфликта измнения вносятся вручную.
Некоторые редакторы предлагают варианты сохранения из определённой ветки: из той, в которую вливают изменения или из которой вливают изменения.

После решения конфликта нет необходимости коммитить (git commit) изменения. Нужно сохранить файл или файлы и заново смёрджить (git merge) ветки.

## Удаление ветки

Для того, чтобы удалить ветку, которая больше не нужна, нужно использовать следующую команду:

	git branch -d <имя ветки>

В данном случае -d = delete.

Таким образом можно удалить ветку только после её слияния с другой веткой.

Для того, чтобы принудительно удалить ветку, которая ни с чем не была слита, нужно использовать команду:

	git branch -D <имя ветки>